(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{119:function(t,e,a){a(136);var n=a(24),s=(a(7),a(4)),i=a(0),o=a(1),r=a(22),d=(a(6),a(5));t.exports={props:["tagId","subscene"],template:a(138),components:{"tag-list":a(139)},data:function(){return{RmdEnum:d,tabObj:null,task:null,feedsTagId:this.tagId,feedsSubscene:this.subscene}},provide:function(){return{view:{Bus:this.Bus}}},activated:function(){this.$route.query.categoryId||this.$router.replace({path:"/index/".concat(this.$data.feedsTagId)})},methods:{getTagId:function(){return this.$refs.feeds&&this.$refs.feeds.feeds.tagId},getSearchId:function(){return this.$refs.feeds&&this.$refs.feeds.feeds.searchId||o.searchId},beforeGettingData:function(t){return o.extParams.assistantPassStr&&t.args.extReqParams.push({key:"assistantPassStr",textValue:o.extParams.assistantPassStr}),t},afterGettingData:function(t){var e=t.ret;return e.tab&&e.tab.length&&!this.$data.tabObj&&(this.$data.tabObj=e.tab),e.task&&!i.isObjEmpty(e.task)&&(e.task.taskType&&e.task.taskType!=d.taskType.BAR||(this.$data.task=e.task)),t},gotoTask:function(){i.openSearchWebView({actionType:d.openSearchWebView.actionType.INNER,extParams:JSON.stringify(Object.assign({path:"user-test",tagId:this.$data.task.channel_id},this.$data.task)),type:o.type,query:o.query,scene:o.scene,tabPageType:d.openSearchWebView.tabPageType.RECOMMEND,tagId:this.$data.task.channel_id||"",navBarColor:"#FFFFFF",statusBarStyle:"black",nativeConfig:{title:"看一看用户调研"}})},closeTask:function(t){!t&&((new Image).src="http://wxtest.qq.com/mmcrowdsource/api/close?callback=cb&"+i.object2params(this.$data.task)),this.$data.task=null,localStorage.removeItem("user-test:data")},onFeedsTouchmove:function(){s.report14791(6,this.$data.feedsTagId,this.getSearchId())},onTapTask:function(){this.gotoTask()},onTapTaskClose:function(){this.closeTask()},onTapTag:function(t){},onSwitchTag:function(t){var e=""+this.$data.tabObj[t].category;this.getTagId()&&s.report14791(5,this.getTagId()+"|"+(+new Date-this.tabPageTimeData.startTimestamp-this.tabPageTimeData.leaveTime),this.getSearchId()),s.report14791(1,e+"|"+t,this.getSearchId()),this.tabPageTimeData={startTimestamp:+new Date,onPauseTimestamp:0,leaveTime:0},this.$data.feedsTagId=e,this.$data.feedsSubscene=d.subscene.FROM_TAB,this.$router.replace({path:"/index/".concat(e),query:{hasPageLoading:1}})}},beforeCreate:function(){this.Bus=new r("index")},created:function(){this.tabPageTimeData={startTimestamp:+new Date,onPauseTimestamp:0,leaveTime:0},this.$router.replace({path:"/index/".concat(this.$data.feedsTagId)}),localStorage.removeItem("user-test:data")},mounted:function(){var t=this,e=this;e.$nextTick(function(){o.Bus.$on(e,"activity:state_change",function(a){if(!t._inactive)switch(a.state){case"onResume":var i=localStorage.getItem("recommend:new-webview-time-data");if(i){if(localStorage.removeItem("recommend:new-webview-time-data"),(i=JSON.parse(i)).onPauseTimestamp||!i.searchId)return;var r=+new Date-i.startTimestamp-i.leaveTime;console.log("second page stayTime: ",r),s.report14791(5,i.tagId+"|"+r,i.searchId)}e.$data.tabObj&&e.tabPageTimeData.onPauseTimestamp&&(e.tabPageTimeData.leaveTime+=+new Date-e.tabPageTimeData.onPauseTimestamp,e.tabPageTimeData.onPauseTimestamp=null),e.$data.task&&localStorage.getItem("user-test:data")&&(JSON.parse(localStorage.getItem("user-test:data")).isFinish?e.closeTask(!0):setTimeout(function(){n.confirm("",{title:"本次调研还未结束，是否退出调研？",className:"user-test-notice-confirm",buttons:[{label:"继续调研",type:"default",onClick:function(){e.gotoTask()}},{label:"退出",type:"primary",onClick:function(){e.closeTask()}}]})},o.os.android?50:0));break;case"onPause":e.$data.tabObj&&(e.tabPageTimeData.onPauseTimestamp=+new Date)}})})},beforeDestroy:function(){o.Bus.$offAll(this)}}},136:function(t,e,a){var n=a(137);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,a(3).default)("27608f04",n,!1,{})},137:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,'.index__hd {\n  position: relative;\n  z-index: 2;\n  -webkit-backface-visibility: visible;\n          backface-visibility: visible;\n}\n.index__bd_with-bar {\n  padding-top: 3.625em;\n}\n.index__task {\n  position: relative;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  padding: 15px 0 15px 16px;\n  color: #7D7D7D;\n  font-size: 14px;\n  background-color: #FFFFFF;\n}\n.index__task:before {\n  content: " ";\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  height: 1px;\n  border-top: 1px solid #EBEBEB;\n  -webkit-transform-origin: 0 0;\n  transform-origin: 0 0;\n  -webkit-transform: scaleY(0.5);\n  transform: scaleY(0.5);\n}\n.index__task:after {\n  content: " ";\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  height: 1px;\n  border-bottom: 1px solid #EBEBEB;\n  -webkit-transform-origin: 0 100%;\n  transform-origin: 0 100%;\n  -webkit-transform: scaleY(0.5);\n  transform: scaleY(0.5);\n}\n.index__task-text {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n}\n.index__task-link {\n  display: inline-block;\n  color: #576B95;\n}\n.index__task-close {\n  position: relative;\n  width: 15px;\n  padding: 0 15px;\n}\n.index__task-close:before,\n.index__task-close:after {\n  content: \'\';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 1px;\n  height: 1em;\n  background-color: #7D7D7D;\n}\n.index__task-close:before {\n  -webkit-transform: translate(-50%, -50%) rotate(45deg);\n          transform: translate(-50%, -50%) rotate(45deg);\n}\n.index__task-close:after {\n  -webkit-transform: translate(-50%, -50%) rotate(-45deg);\n          transform: translate(-50%, -50%) rotate(-45deg);\n}\n',""])},138:function(t,e){t.exports='<div class="index">\n    <div class="index__hd">\n        \x3c!--有奖调研--\x3e\n        <div class="index__task" v-if="task">\n            <p class="index__task-text">{{task.wording}} <span class="index__task-link" @click="onTapTask">详情</span></p>\n            <span class="index__task-close" @click.stop.prevent="onTapTaskClose"></span>\n        </div>\n        \x3c!--end of 有奖调研--\x3e\n    </div>\n\n    <div :class="\'index__bd\' + (tabObj ? \' index__bd_with-bar\' : \'\')" v-on:touchmove.once="onFeedsTouchmove">\n        \x3c!--tags的列表--\x3e\n        <tag-list\n            v-if="tabObj"\n            :data="tabObj"\n            @tap="onTapTag"\n            @switch="onSwitchTag"\n        >\n        </tag-list>\n        \x3c!--end of tags的列表--\x3e\n\n        \x3c!--feeds流--\x3e\n        <keep-alive :max="2">\n            <router-view\n                    ref="feeds"\n                    :key="feedsTagId"\n\n                    :tag-id="feedsTagId"\n                    :subscene="feedsSubscene"\n\n                    :before-getting-data="beforeGettingData"\n                    :after-getting-data="afterGettingData"\n            ></router-view>\n        </keep-alive>\n    </div>\n</div>'},139:function(t,e,a){a(140);var n=a(8),s=(a(4),a(0)),i=(a(1),a(6),a(5)),o=a(9);a(27),t.exports={template:a(142),props:["data"],data:function(){var t=this.data.findIndex(function(t){return t.default});return t<0&&(t=0),{RmdEnum:i,RmdMap:o,list:this.data,sliderStyle:{},activeIndex:t,isFixed:!1}},computed:{},methods:{_setSliderStyle:function(t,e,a){this.$data.sliderStyle={transform:"translateX(".concat(t,"px)"),width:"".concat(e,"px"),transition:(void 0!==a?a:300)+"ms"}},onTap:function(t){if(this.$emit("tap",{fromIndex:this.$data.activeIndex,toIndex:t}),n.set(this.$data.list,t,Object.assign(this.$data.list[t],{new:!1})),t!=this.$data.activeIndex){var e=this.$refs["tab"+t][0];this.$data.activeIndex=t,this._setSliderStyle(e.offsetLeft,e.offsetWidth),this.$emit("switch",t)}}},created:function(){var t=this;this.$data.list.some(function(t){return 100==t.category})||this.$data.list.unshift({wording:"全部",category:100}),this.onScroll=function(){var e=s.getScrollTop();t.$data.isFixed=0!=e}},mounted:function(){var t=this;t.$nextTick(function(){t._setSliderStyle(t.$refs["tab".concat(t.$data.activeIndex)][0].offsetLeft,t.$refs["tab".concat(t.$data.activeIndex)][0].offsetWidth,0),s.on(window,"scroll",this.onScroll,{passive:!0})})},beforeDestroy:function(){s.off(window,"scroll",this.onScroll)}}},140:function(t,e,a){var n=a(141);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,a(3).default)("0361e91a",n,!1,{})},141:function(t,e,a){(t.exports=a(2)(!1)).push([t.i,".tag-list {\n  position: fixed;\n  top: -1px;\n  left: 0;\n  right: 0;\n  z-index: 999;\n  font-size: 17px;\n  height: 2.82352941em;\n  overflow: hidden;\n}\n.tag-list_isFixed {\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.15);\n}\n.tag-list__inner {\n  position: relative;\n  overflow-x: scroll;\n  background-color: #FFFFFF;\n  -webkit-overflow-scrolling: touch;\n  line-height: 2.82352941em;\n  height: 3.41176471em;\n}\n.tag-list__inner ul {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n}\n.tag-list__tab {\n  color: #7F7F7F;\n  margin: 0 10px;\n  padding: 0 5px;\n  white-space: nowrap;\n  background-color: #FFFFFF;\n  -webkit-transition: color 0.3s;\n  transition: color 0.3s;\n  -webkit-transform: translateZ(0);\n          transform: translateZ(0);\n}\n.tag-list__tab .weui-badge {\n  position: absolute;\n  top: 0.8em;\n}\n.tag-list__tab_on {\n  color: #000000;\n}\n.tag-list__slider {\n  position: absolute;\n  bottom: 0.58823529em;\n  left: 0;\n  width: 2em;\n  height: 2px;\n  background-color: #1B1B1B;\n}\n",""])},142:function(t,e){t.exports='<div class="tag-list" :class="{\'tag-list_isFixed\': isFixed}">\n    <div class="tag-list__inner">\n        <ul>\n            <li\n                    v-for="(tab, index) in list"\n                    :ref="\'tab\' + index"\n                    class="tag-list__tab"\n                    :class="{\'tag-list__tab_on\':index == activeIndex}"\n                    @click="onTap(index)"\n            >{{tab.wording}}\n                <span v-if="tab.new" :class="{\'weui-badge\': true, \'weui-badge_dot\': tab.new === true}">\n                    {{tab.new === true ? null : tab.new}}\n                </span>\n            </li>\n        </ul>\n        <div class="tag-list__slider" :style="sliderStyle"></div>\n    </div>\n</div>'}}]);